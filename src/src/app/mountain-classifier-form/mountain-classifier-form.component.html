<form [formGroup]="mountainClassifierForm" (ngSubmit)="processPhoto()">
  <div class="container-fluid">
    <div class="col-12 d-flex justify-content-center align-items-center">
      <mat-accordion>
        <mat-expansion-panel
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header>
            <mat-panel-title>How to use our Application</mat-panel-title>
          </mat-expansion-panel-header>
          <div>
            <ol>
              <li>Upload the image of the mountain you want identified</li>
              <li>
                Select a geographic point on the map where you think you were
                when you took the photo
              </li>
              <li>
                Click the "Process Photo" Button to have our application predict
                which mountain you took a photo of
              </li>
            </ol>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </div>

    <div class="row mt-4 justify-content-center">
      <div class="col-12 text-center">
        <div class="upload-image-container">
          <input
            type="file"
            id="file-input"
            (change)="onFileSelected($event)"
            accept="image/*"
          />
          <label for="file-input">Upload or Replace Image</label>
        </div>
      </div>
      <div class="col-12 d-flex justify-content-center align-items-center">
        <div class="image-cropper-container">
          <image-cropper
            *ngIf="imageChangedEvent"
            [imageChangedEvent]="imageChangedEvent"
            [maintainAspectRatio]="true"
            [aspectRatio]="2.05"
            [resizeToWidth]="2048"
            [cropperMinWidth]="250"
            [cropperMinHeight]="128"
            [cropperMaxWidth]="2048"
            [cropperMaxHeight]="1024"
            [canvasRotation]="0"
            [style.display]="true"
            [transform]="transform"
            (imageCropped)="onImageCropped($event)"
          ></image-cropper>
          <div *ngIf="!imageChangedEvent" class="image-placeholder-container">
            <br />
            <h1>Select an image to begin</h1>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-12 d-flex justify-content-center align-items-center">
        <div id="map" style="width: 63vw"></div>
      </div>
    </div>

    <div class="row mt-1">
      <div class="col-12 text-center">
        <button
          mat-raised-button
          color="primary"
          type="submit"
          class="mx-auto"
          [disabled]="!mountainClassifierForm.valid"
        >
          Process Photo
        </button>
      </div>
    </div>
  </div>
  <br />
</form>
